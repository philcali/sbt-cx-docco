<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>DoccoProject.scala</title>
  <link href="http://circumflex.ru/css/docco.css"
        rel="stylesheet"
        type="text/css"
        media="screen, projection"/>
  <script type="text/javascript" src="http://circumflex.ru/js/highlight.pack.js">
  </script>
  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>
</head>
<body>
<div id="container">
  <table cellspacing="0" cellpadding="0">
    <thead>
    <tr>
      <th class="docs">
        <h1><a href="../../../index.html" title="Back to index">&larr;</a>&nbsp;&nbsp;DoccoProject.scala</h1>
      </th>
      <th class="code"></th>
    </tr>
    </thead>
    <tbody>
    <tr id="section-0">
      <td class="docs">
        <div class="octowrap">
          <a class="octothorpe" href="#section-0">#</a>
        </div>
      
      </td>
      <td class="code">
        <pre class="scala"><code>package com.github.philcali

import sbt._

import Keys._

import util.matching.Regex

import ru.circumflex.core.cx
import ru.circumflex.docco._</code></pre>
      </td>
    </tr>
    <tr id="section-1">
      <td class="docs">
        <div class="octowrap">
          <a class="octothorpe" href="#section-1">#</a>
        </div>
      <h1>SBT Circumflex Docco Plugin</h1>
<p>This <a href="https://github.com/harrah/xsbt/wiki">sbt</a> plugin allows for docco style document by running a single command in your build tool.</p>
<p>The plugin offers developers multiple ways to configure the the output and docco generation. The program that actually generates the docco style docs was written and currently maintained by the <a href="http://circumflex.ru/">cicumflex</a> team.</p>
<p>Simply insert the following lines in your ./project/plugins/build.sbt:</p>
<pre><code>addSbtPlugin("com.github.philcali" % "sbt-cx-docco" % "0.1.2")</code></pre>
<p>Enjoy!</p>

      </td>
      <td class="code">
        <pre class="scala"><code>object DoccoPlugin extends Plugin {
  import docco._

  object docco {
    val basePath = SettingKey[File](&quot;docco-base-path&quot;,
          &quot;The base path for circumflex batch docco processing.&quot;)

    val outputPath = SettingKey[File](&quot;docco-output-path&quot;,
          &quot;The output path resulting in html docco documentation.&quot;)

    val pageTemplate = SettingKey[File](&quot;docco-page-template&quot;,
          &quot;The page template applied to all converted source files.&quot;)

    val indexTemplate = SettingKey[File](&quot;docco-index-template&quot;,
          &quot;The template for the index page in batch processing.&quot;)

    val filenameRegex = SettingKey[Regex](&quot;docco-filename-regex&quot;,
          &quot;The regex used to obtain files for documenting.&quot;)
    
    val title = SettingKey[String](&quot;docco-title&quot;,
          &quot;The resulting index title&quot;)

    val stripScaladoc = SettingKey[Boolean](&quot;docco-strip-scaladoc&quot;,
          &quot;Strips the Scaladoc in the resulting docco output&quot;)

    val skipEmpty = SettingKey[Boolean](&quot;docco-skip-empty&quot;,
          &quot;If true, filters docco's with no markdown.&quot;)

    val properties = TaskKey[Unit](&quot;docco-properties&quot;,
          &quot;Builds the cx.properties file for batch processing&quot;)

    val generate = TaskKey[Unit](&quot;docco-generate&quot;, &quot;Docco style documentation generations&quot;)
  }

  private def doccoPropertiesTask = 
    (basePath, outputPath, pageTemplate,
    indexTemplate, filenameRegex, title, 
    stripScaladoc, skipEmpty, streams) map {
    (bp, op, pt, it, fr, ti, ss, se, s)  =&gt;
    // Settings circumflex properties
    cx(&quot;docco.basePath&quot;) = bp
    cx(&quot;docco.outputPath&quot;) = op

    // Need to build the output path
    if (!op.exists) {
      IO.createDirectory(op)
    }

    // The cx batch processor looks only for a string, so we must
    // verify that these exist
    if (pt.exists) {
      cx(&quot;docco.pageTemplate&quot;) = pt.absolutePath
    }

    if (it.exists) {
      cx(&quot;docco.indexTemplate&quot;) = it.absolutePath
    }

    cx(&quot;docco.filenameRegex&quot;) = fr.toString
    cx(&quot;docco.title&quot;) = ti
    cx(&quot;docco.stripScaladoc&quot;) = ss
    cx(&quot;docco.skipEmpty&quot;) = se
    
    s.log.info(&quot;Setting docco properties ... done.&quot;)
  }

  lazy val doccoSettings: Seq[Setting[_]] = Seq (</code></pre>
      </td>
    </tr>
    <tr id="section-2">
      <td class="docs">
        <div class="octowrap">
          <a class="octothorpe" href="#section-2">#</a>
        </div>
      <h2>Configurable Settings</h2>
<ul>
  <li>docco.basePath is where the crawler will start its search</li>
  <li>docco.outputPath is where you want your docco's</li>
  <li>docco.pageTemplate is the path to the template producing this page</li>
  <li>docco.indexTemplate is the path to the template producing the previous page</li>
  <li>docco.filenameRegex is the regex to filter physical files</li>
  <li>docco.title is the title of the index page</li>
  <li>docco.stripScaladoc strips any Scaladoc tags</li>
  <li>docco.skipEmpty will not include a file without documentation</li>
  <li>docco.properties sets the global docco property values for generation</li>
  <li>docco.generate run the actual docco generation</li>
</ul>

      </td>
      <td class="code">
        <pre class="scala"><code>    // Configurable Settings
    basePath := file(&quot;.&quot;),
    outputPath &lt;&lt;= (target) { _ / &quot;docco&quot; },
    pageTemplate := file(&quot;.&quot;) / &quot;docco-batch-page.html.ftl&quot;,
    indexTemplate := file(&quot;.&quot;) / &quot;docco-index.html.ftl&quot;,
    filenameRegex := &quot;&quot;&quot;.*\.scala$&quot;&quot;&quot;.r,
    docco.title &lt;&lt;= name,
    stripScaladoc := true,
    skipEmpty := true,

    // Configurable tasks
    properties &lt;&lt;= doccoPropertiesTask,
    generate &lt;&lt;= (streams) map { s =&gt;
      s.log.info(&quot;Generating docco's now...&quot;)
      val batch = new DoccoBatch
      batch.generate
      s.log.info(&quot;Done&quot;)
    },
    generate &lt;&lt;= generate dependsOn properties,

    cleanFiles &lt;+= outputPath,

    aggregate in properties := false,
    aggregate in generate := false
  )
}</code></pre>
      </td>
    </tr>
  </table>
</div>
</body>
</html>